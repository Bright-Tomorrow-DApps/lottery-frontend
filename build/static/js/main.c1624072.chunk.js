(this["webpackJsonpreact-client"]=this["webpackJsonpreact-client"]||[]).push([[0],{271:function(e,t,n){"use strict";(function(e){var r=n(10),c=n(2),a=n.n(c),o=n(9),s=n(7),u=n(1),i=n.n(u),l=n(503),f=n(495),d=n(288),b=n(177),p=n(176),h=n(497),j=n(27),x=n(492),g=n(496),m=n(178),w=n(274),O=n.n(w),y=n(498),v=n(499),k=n(500),C=n(501),S=n(502),L=n(490),F=n(491),I=n(131),A=n(102),B=(n(42),n(4));n(350);var E="JA6TgMfnxhRFuDuAfsinkgMuxWk7Kmy6EQrwZ3Psb1in",M=function e(t,n){Object(s.a)(this,e),this.random=0,this.counter=0,this.counter=t,this.random=n},W=new Map([[M,{kind:"struct",fields:[["counter","u32"],["random","u32"]]}]]),P=function e(t,n){Object(s.a)(this,e),n||(n=""),this.counter=t,this.lottery_content=n},N=new Map([[P,{kind:"struct",fields:[["counter","u32"],["lottery_content","string"]]}]]),T=A.serialize(W,new M).length,R=(A.serialize(N,new P).length,null),z=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.devnet.solana.com",R=new j.a(t,"confirmed"),e.next=4,R.getVersion();case 4:n=e.sent,console.log("Connection to cluster established:",t,n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,R.getBalance(t);case 3:if(!((r=e.sent)<n)){e.next=13;break}return e.next=7,R.requestAirdrop(t,n-r);case 7:return c=e.sent,e.next=10,R.confirmTransaction(c);case 10:return e.next=12,R.getBalance(t);case 12:r=e.sent;case 13:console.log("Using account",t.toBase58(),"containing",r/j.c,"SOL to pay for fees");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,c,o,s,u,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get payer public key ".concat(t)),r=new j.d(E),e.next=4,R.getAccountInfo(r);case 4:if(null!==(c=e.sent)){e.next=9;break}throw new Error("Program get fail");case 9:if(c.executable){e.next=11;break}throw new Error("Program is not executable");case 11:return console.log("Using program ".concat(r.toBase58())),o="hello",e.next=15,j.d.createWithSeed(t,o,r);case 15:return s=e.sent,e.next=18,R.getAccountInfo(s);case 18:if(null!==e.sent){e.next=30;break}return console.log("Creating account",s.toBase58()),e.next=23,R.getMinimumBalanceForRentExemption(T);case 23:return u=e.sent,i=(new j.f).add(j.e.createAccountWithSeed({fromPubkey:t,basePubkey:t,seed:o,newAccountPubkey:s,lamports:u,space:T,programId:r})),e.next=27,n(i,R);case 27:return l=e.sent,e.next=30,R.confirmTransaction(l,"processed");case 30:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),D=function(){var t=Object(o.a)(a.a.mark((function t(n,r,c,o){var s,u,i,l,f,d,b;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=3;break}throw new Error("Wallet not connected");case 3:if(r){t.next=5;break}throw new Error("Wallet does not support message signing");case 5:return s=new j.d(E),t.next=8,U("hello",n,s);case 8:return u=t.sent,i=new P(o.length,JSON.stringify(o)),l=A.serialize(N,i),f=new j.g({keys:[{pubkey:u,isSigner:!1,isWritable:!0}],programId:s,data:e.from(l)}),d=(new j.f).add(f),t.next=15,r(d,c);case 15:return b=t.sent,t.abrupt("return",b);case 19:t.prev=19,t.t0=t.catch(0),console.error("Signing failed: ".concat(null===t.t0||void 0===t.t0?void 0:t.t0.message));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e,n,r,c){return t.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.d.createWithSeed(n,t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function K(e,t){return Math.floor(Math.random()*(t-e+1))+e}var _=function(e){return-1!==e},q=function(e){var t=e.showLottery,n=e.lotteryContent,r=e.lotteryWay,c=e.setShowLottery,s=e.randomNumber,i=e.setRandomNumber,l=Object(b.b)().connection,f=Object(p.b)(),d=f.publicKey,h=f.sendTransaction;return Object(u.useMemo)(Object(o.a)(a.a.mark((function e(){var t,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&l&&H(r)&&!_(s)){e.next=2;break}return e.abrupt("return");case 2:return console.log("- \u53d6\u5f97payer public key: ".concat(d)),console.log("- \u9023\u63a5\u93c8\u4e2d..."),e.next=6,z();case 6:return console.log("- \u53d6\u5f97\u652f\u4ed8\u624b\u7e8c\u8cbb\u4f7f\u7528\u8005\u8cc7\u8a0a..."),e.next=9,J(d);case 9:return console.log("- \u6aa2\u67e5program..."),e.next=12,V(d,h);case 12:return e.next=14,D(d,h,l,n);case 14:return t=e.sent,e.next=17,l.confirmTransaction(t,"processed");case 17:return e.next=19,Q(d);case 19:o=e.sent,u=o.random,console.log("- random number: ".concat(u)),i(u),c(!0);case 24:case"end":return e.stop()}}),e)}))),[d,h,l,r,i,c,s,n]),t&&_(s)?Object(B.jsx)("div",{children:Object(B.jsx)(O.a,{onInit:function(e){e.typeString(G("Solana Program \u904b\u884c\u4e2d...")).pauseFor(1500).deleteAll().typeString(G("\u62bd\u51fa\u7684\u7d50\u679c\u662f...")).pauseFor(1500).deleteAll().typeString(G("".concat(n[s-1],"!"))).callFunction((function(){console.log("All strings were deleted")})).start()}})}):Object(B.jsx)("div",{})},G=function(e,t){var n=["#8ECAE6","#219EBC","#023047","#FFB703","#FB8500"];return t||(t=n[K(0,n.length-1)]),'<span style="color: '.concat(t,'; font-size: 7vw">').concat(e,"</span>")},Q=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new j.d(E),e.next=3,U("hello",t,n);case 3:return r=e.sent,e.next=6,R.getAccountInfo(r);case 6:if(null!==(c=e.sent)){e.next=9;break}throw new Error("Error: cannot find the greeted account");case 9:return o=A.deserialize(W,M,c.data),e.abrupt("return",o.counter);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Z=function(e){var t=e.setValue,n=e.defaultInput;return Object(B.jsx)(l.a,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"70ch"}},noValidate:!0,autoComplete:"off",children:Object(B.jsx)("div",{children:Object(B.jsx)(f.a,{id:"filled-multiline-static",multiline:!0,rows:6,variant:"filled",defaultValue:n,onChange:function(e){t(JSON.parse(e.target.value))}})})})},H=function(e){return"chain"===e},X=function(e){return""!==e},Y=function(e){var t=e.lotteryContent,n=e.showLottery,r=e.setLotteryContent,c=e.setLotteryWay,a=e.setRandomNumber,o=e.setShowLottery,s=e.defaultInput,i=Object(u.useCallback)((function(){!function(e){e("frontend")}(c),a(K(1,t.length)),o(!0)})),l=Object(u.useCallback)((function(){!function(e){e("chain")}(c)}));return n?null:Object(B.jsxs)("div",{children:[Object(B.jsx)(Z,{setValue:r,defaultInput:s}),Object(B.jsx)(d.a,{variant:"contained",onClick:l,children:"\u57fa\u65bc\u93c8\u4e0a\u62bd"})," ",Object(B.jsx)(d.a,{variant:"contained",onClick:i,children:"\u57fa\u65bc\u524d\u7aef\u62bd"})]})},$=function(){return new URLSearchParams(window.location.search)};t.a=function(){var e=m.b.Devnet,t=Object(u.useMemo)((function(){return Object(j.h)(e)}),[e]),n=Object(u.useMemo)((function(){return[Object(y.a)(),Object(v.a)(),Object(k.a)(),Object(C.a)({options:{clientId:"Get a client ID @ https://developer.tor.us"}}),Object(S.a)(),Object(L.a)({network:e}),Object(F.a)({network:e})]}),[e]),c=$().get("lotteryContent"),a=i.a.useState(!1),o=Object(r.a)(a,2),s=o[0],l=o[1],f=i.a.useState(-1),d=Object(r.a)(f,2),b=d[0],p=d[1],w=i.a.useState(c),O=Object(r.a)(w,2),A=O[0],E=O[1],M=i.a.useState(""),W=Object(r.a)(M,2),P=W[0],N=W[1];return Object(B.jsx)(x.a,{endpoint:t,children:Object(B.jsx)(g.a,{wallets:n,autoConnect:!0,children:Object(B.jsxs)(I.b,{children:[Object(B.jsx)(q,{showLottery:s,lotteryContent:A,lotteryWay:P,setShowLottery:l,randomNumber:b,setRandomNumber:p}),X(P)?null:Object(B.jsx)(Y,{setShowLottery:l,lotteryContent:A,showLottery:s,setLotteryContent:E,setLotteryWay:N,setRandomNumber:p,defaultInput:c}),H(P)?Object(B.jsxs)(h.a,{container:!0,justifyContent:"center",spacing:2,children:[Object(B.jsx)(I.c,{}),Object(B.jsx)(I.a,{})]}):null]})})})}}).call(this,n(6).Buffer)},303:function(e,t,n){},304:function(e,t,n){},307:function(e,t){},308:function(e,t){},329:function(e,t){},330:function(e,t){},353:function(e,t){},355:function(e,t){},365:function(e,t){},367:function(e,t){},394:function(e,t){},396:function(e,t){},401:function(e,t){},403:function(e,t){},410:function(e,t){},422:function(e,t){},425:function(e,t){},430:function(e,t){},432:function(e,t){},441:function(e,t){},443:function(e,t){},452:function(e,t){},453:function(e,t){},489:function(e,t,n){"use strict";n.r(t);n(1);var r=n(53),c=n.n(r),a=(n(303),n(304),n(271)),o=n(285),s=n(4);var u=function(){return Object(o.a)({palette:{mode:"dark"}}),Object(s.jsx)("div",{className:"App",children:Object(s.jsx)(a.a,{})})},i=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,552)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))},l=n(550);c.a.render(Object(s.jsx)(l.a,{injectFirst:!0,children:Object(s.jsx)(u,{})}),document.getElementById("root")),i()}},[[489,1,2]]]);
//# sourceMappingURL=main.c1624072.chunk.js.map